<p id="notice"><%= notice %></p>

<p>
  <strong>Name:</strong>
  <%= @course.name %>
</p>
<p>
  <strong>Instrutor:</strong>
  <%= @instrutor.name %>
</p>
<p>
  <strong>Limit:</strong>
  <%= @course.limit %>
</p>

<p>
  <strong>Fee:</strong>
  <%= @course.fee %>
</p>

<p>
  <strong>Numberofenrolled:</strong>
  <%= @course.user_courses.count %>
</p>

<p>
  <strong>Start:</strong>
  <%= @course.start %>
</p>

<p>
  <strong>End:</strong>
  <%= @course.end %>
</p>
<table >
  <th>
    <tr>
      <th>Students</th>
    </tr>
  </th>
  <tb>

    <% @user_courses.each do |user_course| %>
    <tr>
      <%student = User.find(user_course.user_id)%>
      <td><%= student.name %></td>

      <td>
        <%= link_to 'Delete', user_course_path(user_course),
                                :method => :delete,
                                :data => { :confirm => "Are you sure?" },
                                :class => "btn btn-xs btn-danger" %>
      </td>

    </tr>
    <% end %>
  </tb>
  <%if @course.can_add_student?(@course.id)%>
    <%= link_to 'Add to my Courses', user_courses_path(user: current_user, course_id: @course.id),
             class: 'btn btn-xs btn-success', method: :post  %> |
  <%else%>
    <span class="label label-default">
      Student cannot be added because you have already added
      <%if !@course.under_course_limit?(@course.id)%>
      <%= @course.limit %> students
      <%end %>

      <%if @course.student_already_added?(ucurrent_user.id )%>
      this student
      <%end%>
  <%end%>
  <%= link_to 'Edit', edit_course_path(@course) %> |
  <%= link_to 'Back', courses_path %>
